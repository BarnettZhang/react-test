# Project Rules（宽松版）

## 1. 代码风格（更宽松）

- 缩进：推荐 2 空格；已有 4 空格或 Tab 的遗留文件可保留
- 分号：可选，随文件保持一致即可
- 引号：单引号/双引号均可；JSON 保持双引号
- 逗号：尾逗号可选；行内结构超长时可加以提升 diff 可读性
- 括号与空格：不强制具体风格，以可读性为先
- 行长度：建议 120；超过时自由换行或按编辑器自动折行
- 命名：推荐 camelCase/PascalCase；与第三方或协议字段对齐时允许 snake_case
- 文件扩展：`.js`/`.jsx`/`.ts`/`.tsx` 均可；同模块内保持一致
- TypeScript：尽量补类型，但允许在快速迭代或边界兼容处使用 `any`；公共模块优先明确类型
- JSX：自闭合标签优先但不强制；属性顺序不作硬性规定
- 导入顺序：不强制排序；仅需避免循环依赖
- 格式化：可选使用 `prettier` 或编辑器格式化；不强制统一规则
- Lint：警告视为建议；仅在影响稳定性或可维护性时必须修复
- 注释：以中文为主，关键逻辑可双语，但避免“陈述显而易见”的注释

## 2. 目录结构

- 根目录：保留 `src/` 为主要代码目录，`public/` 静态资源，`dist/` 构建产物
- `src/pages` 页面级组件，允许按路由或业务域分子目录
- `src/components` 可复用通用组件；页面私有组件可就近放置于对应页面目录
- `src/layouts` 布局组件；顶层布局承载导航与路由出口
- `src/router` 路由配置，推荐分模块懒加载
- `src/store` 状态管理（如 zustand）；小型状态允许页面内局部管理
- `src/api` 请求封装（如 axios），建议按资源分类
- `src/assets` 图片、图标等静态资源；体积较大资源建议按需加载
- `src/styles` 全局样式或主题配置；允许与 UI 库共存
- 允许按需引入新目录；优先清晰与可维护，避免强制统一

## 3. 依赖与包管理

- 优先使用稳定版本；必要时可引入 RC/Next 版本并在说明处注明
- 包管理器不强制（npm/pnpm/yarn 均可）；团队内保持一致
- 锁文件应提交；更换包管理器需清理旧锁文件
- 第三方库按需使用，避免“为用而用”；评估体积与维护成本

## 4. 分支与提交规范

- 分支命名建议：`feature/*`、`fix/*`、`chore/*`、`docs/*`；不强制
- 提交信息简洁描述变更；可选使用 Conventional Commits
- 小步提交，避免巨型“混合改动”；必要时分批提交

## 5. 测试策略

- 测试框架不强制；建议使用 Vitest/Jest
- 关键逻辑（工具函数、核心交互、数据处理）尽量覆盖
- UI 快照测试可选；避免因微小样式变动频繁失败
- 接口模拟优先轻量方案（mock 服务或 MSW），按需选择

## 6. 构建与发布

- 开发：`npm run dev` ；本地预览：`npm run preview`
- 构建：`npm run build` ；构建产物位于 `dist/`
- 构建检查以实际发布环境为准；允许在灰度中迭代修正
- Source Map 可按环境开启/关闭；生产环境优先关闭或限制

## 7. 环境与配置

- 使用 `.env` 系列文件；客户端可读变量使用 `VITE_*` 前缀
- 配置项尽量集中管理；允许按模块分散但需有入口汇总
- 机密信息不进入前端仓库；仅通过服务端注入或网关代理

## 8. 路由与状态管理

- 路由采用按需/懒加载；大页面优先代码拆分
- 全局状态谨慎引入；优先局部状态与组件内管理
- 跨页面共享数据再考虑 store；避免“为共享而共享”

## 9. API 约定

- 请求统一在 `src/api` 管理；可选封装 axios 实例与拦截器
- 返回值结构保持稳定；约定错误码与消息字段
- 错误优先在页面层友好提示；全局弹窗谨慎使用

## 10. 样式与 UI 资源

- 可混用 Tailwind、CSS Modules、Ant Design；按场景选择
- 全局样式控制范围最小化；组件样式优先局部化
- 图片与图标按需导入；大图使用懒加载或占位

## 11. 日志与错误

- 开发阶段允许 `console.*`；生产环境尽量减少并汇总上报
- 统一错误边界在关键页面；组件内部错误就地处理
- 不记录敏感信息；脱敏后再日志

## 12. 性能与可访问性

- 列表与图表等重组件优先懒加载或虚拟化
- 图片优化、缓存与 CDN 按需启用
- 保持基础可访问性（语义标签、可聚焦、键盘可操作）

## 13. 国际化（可选）

- 需要多语言时再接入；默认以中文为主
- 文案集中管理；避免在组件中硬编码大量文案

## 14. 安全

- 输入校验与转义；防止 XSS、CSRF 等常见风险
- 仅在必要时暴露变量到客户端；避免泄露内部信息

## 15. 文件命名与模块组织

- 组件使用 PascalCase；工具与常量使用 camelCase/UPPER_CASE
- 文件夹命名保持简洁；允许按功能或领域组织
- 模块体积过大及时拆分；公共模块避免过度耦合

## 16. 开发流程与命令

- 开发：`npm run dev` ；构建：`npm run build` ；预览：`npm run preview`
- 代码检查：`npm run lint` 可选执行；CI 可按需接入
- 变更优先自测后再提交；Review 流程视团队规模而定
